jQuery.extend(jQuery.ajax,{_requestCache:{}}),jQuery.extend({DIC:{charset:"utf-8",reload:function(e,t){e=e||"",t=t||1,re=/^http(s)?:\/\/(.+\.)*?(qq\.com)(\/.*)*/,re1=/^http(s)?:\/\//,setTimeout(function(){re.test(e)?window.location.href=e:e&&!re1.test(e)?window.location.href="http://"+window.location.hostname+e:window.location.reload()},t)},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},isObjectEmpty:function(e){for(i in e)return!1;return!0},strlen:function(e){return/msie/.test(navigator.userAgent.toLowerCase())&&e.indexOf("\n")!==-1?e.replace(/\r?\n/g,"_").length:e.length},mb_strlen:function(e){var t=0;for(var n=0;n<e.length;n++)t+=e.charCodeAt(n)<0||e.charCodeAt(n)>255?jQuery.DIC.charset.toLowerCase()==="utf-8"?3:2:1;return t},mb_cutstr:function(e,t,n){var r=0,i="",n=!n&&n!==""?"...":n;t-=n.length;for(var s=0;s<e.length;s++){r+=e.charCodeAt(s)<0||e.charCodeAt(s)>255?jQuery.DIC.charset.toLowerCase()==="utf-8"?3:2:1;if(r>t){i+=n;break}i+=e.substr(s,1)}return i},strLenCalc:function(e,t,n){var r=e.value,n=n?n:200,i=n,s=jQuery.DIC.strlen(r);for(var o=0;o<r.length;o++)if(r.charCodeAt(o)<0||r.charCodeAt(o)>255)i-=1;jQuery("#"+t).html(Math.floor((i-s)/2))},dialog:function(e){var e=e||{},t=e.id||"tips",n="fwin_dialog_"+t,r="fwin_mask_"+t;if(!e.content)return document.ontouchmove=function(e){return!0},jQuery("#"+n).remove(),jQuery("#"+r).remove(),!1;var i=e.title||"鎻愮ず淇℃伅",s=e.content||"",o=e.okValue||!1,u=e.cancelValue||!1,a=e.isMask||!1,f=0,l=1e3+f*10,c=l+1,h="position:absolute;top:-0px;left:-0px;width:"+jQuery(document).width()+"px;height:"+jQuery(document).height()+"px;background:#000;filter:alpha(opacity=60);opacity:0.5; z-index:"+l+";",p=e.isHtml||!1,d=e.autoClose||!1,v=!1,m="";switch(e.icon){case"success":m="icon_success";break;case"none":m="";break;case"error":default:m="g-layer-tips"}var g=[];if(a){var y=[];y.push("<div id="+r+' class="g-mask" style="'+h+'"></div>');var b=y.join("");jQuery(b).appendTo("body")}if(p)g.push('<div style="width:100%;position:fixed;z-index:'+c+';" id="'+n+'">'+s+"</div>");else if(!e.title&&!o&&!u)g.push('<div class="tips" style="position:fixed;z-index:'+c+';" id="'+n+'">'+s+"</div>");else{if(v)return confirm(s)?typeof e.ok=="function"&&e.ok():typeof e.cancel=="function"&&e.cancel(),!0;g.push('<div style="min-width:350px;position:fixed;z-index:'+c+';" id="'+n+'"><span class="close"></span>'),g.push('<div class="popLayer pSpace">'),g.push('<p class="editTCon">'+s+"</p>"),g.push('<div class="editArea">'),g.push(o?'<a href="javascript:;" class="editBtn1 db" title="">'+o+"</a>":""),g.push(o?'<a href="javascript:;" class="editBtn2 db" title="">'+u+"</a>":""),g.push("</div></div>")}var w=g.join("");jQuery("#"+n)[0]&&(jQuery("#"+n).remove(),jQuery("#"+r).remove()),jQuery(w).appendTo("body");var E=jQuery(window).width(),S=jQuery(window).height();x=(E-jQuery("#"+n).outerWidth())/2,T=(S-jQuery("#"+n).height())*.382;var x=e.left||x,T=e.top||T;jQuery("#"+n).css({top:T+"px",left:x+"px"}),jQuery("#"+n+" .close").click(function(){a&&(document.ontouchmove=function(e){return!0});var t=!0;typeof e.close=="function"&&(t=e.close()),t&&(jQuery("#"+r).hide(),jQuery("#"+r).remove(),jQuery("#"+n).hide(),jQuery("#"+n).remove())}),typeof e.callback=="function"&&(a&&(document.ontouchmove=function(e){e.preventDefault()}),e.callback()),typeof e.ok=="function"&&jQuery("#"+n+" .editBtn1").click(function(){e.ok()}),typeof e.cancel=="function"&&jQuery("#"+n+" .editBtn2").click(function(){e.cancel()}),jQuery("#"+n+" .editBtn1")[0]&&jQuery("#"+n+" .editBtn1").click(function(){jQuery("#"+n+" .close").click()}),jQuery("#"+n+" .editBtn2")[0]&&jQuery("#"+n+" .editBtn2").click(function(){jQuery("#"+n+" .close").click()}),!e.title&&!o&&!u&&d&&(d=d>1?d:1e3,setTimeout(function(){jQuery("#"+n).fadeOut("slow",function(){jQuery("#"+r).hide(),jQuery("#"+r).remove(),jQuery("#"+n).hide(),jQuery("#"+n).remove(),typeof e.close=="function"&&e.close()})},d))},initTouch:function(e){function u(t){var o=t.touches[0];r=o.pageY,n=o.pageX,i=o.pageX,s=o.pageY,typeof e.start=="function"&&e.start(t)}function a(t){touch=t.touches[0],i=touch.pageX,s=touch.pageY;if(typeof e.move=="function"){var o={x:n-i,y:r-s};e.move(t,o)}}function f(t){if(typeof e.end=="function"){var o={x:n-i,y:r-s};e.end(t,o)}}var t=e.obj||document,n,r,i,s,o;t.addEventListener("touchstart",u,!1),t.addEventListener("touchmove",a,!1),t.addEventListener("touchend",f,!1)},showLoading:function(e,t){var e=e||"block",t=t||"姝ｅ湪鍔犺浇...";e=="block"?jQuery.DIC.dialog({id:"loading",content:t,noMask:!0}):jQuery.DIC.dialog({id:"loading"})},ajax:function(e,t,n){var r=r||{},i="";e=e.indexOf("?")===-1?e+"?":e+"&",e=e.replace(/\&resType\=[^\&]+/g,"")+"resType=json",e=e.replace(/\&isAjax\=1/g,"")+"&isAjax=1";var s={url:e,data:t,processData:n.isUpload,contentType:n.isUpload?!1:"application/x-www-form-urlencoded",type:t?"POST":"GET",dataType:n.dataType||"json",timeout:n.timeout||3e4,jsonp:n.dataType==="jsonp"?"callback":null,jsonpCallback:n.dataType==="jsonp"?n.success:null,beforeSend:function(e,t){if(n.requestIndex)if(n.requestMode=="block"){if(jQuery.ajax._requestCache[n.requestIndex])return!1}else n.requestMode=="abort"&&jQuery.ajax._requestCache[n.requestIndex]&&jQuery.ajax._requestCache[n.requestIndex].abort();var r=!0;return typeof n.beforeSend=="function"&&(r=n.beforeSend(e,t)),r&&(jQuery.ajax._requestCache[n.requestIndex]=e,n.noShowLoading||(i=setTimeout(function(){jQuery.DIC.showLoading()},100))),r},complete:function(e,t){jQuery.ajax._requestCache[n.requestIndex]&&(jQuery.ajax._requestCache[n.requestIndex]=null),typeof n.complete=="function"&&n.complete(e,t)},success:function(e,t,s){n.dataType!=="jsonp"&&(e!==null?typeof n.success=="function"&&n.success(e,t,s):(n.noMsg||jQuery.DIC.dialog({content:'缃戠粶绻佸繖锛岃绋嶅€欏啀璇曪紒<span style="display:none;">errno:2</span>',autoClose:!0}),typeof n.error=="function"&&n.error())),clearTimeout(i),jQuery.DIC.showLoading("none"),e==null&&jQuery.DIC.dialog({content:'缃戠粶绻佸繖锛岃绋嶅€欏啀璇曪紒<span style="display:none;">errno:1</span>',autoClose:!0}),typeof e!="object"&&(e=jQuery.parseJSON(e));if(e.errCode==0){r.noMsg||jQuery.DIC.dialog({content:e.message,icon:"success",autoClose:!0}),typeof r.success=="function"&&r.success(e,statusText,r);if(!r.noJump&&e.jumpURL){var o=e.locationTime||2e3;jQuery.DIC.reload(e.jumpURL,o)}}else if(e.errCode){var u=e.message+'<span style="display:none;">'+e.errCode+"</span>";jQuery.DIC.dialog({content:u,autoClose:!0})}else jQuery.DIC.dialog({content:'缃戠粶绻佸繖锛岃绋嶅€欏啀璇曪紒<span style="display:none;">errno:2</span>',autoClose:!0})},error:function(e,t,r){clearTimeout(i),jQuery.DIC.showLoading("none");if(e.readyState==0||e.status==0)return!1;t!="abort"&&!n.noMsg&&jQuery.DIC.dialog({content:'缃戠粶绻佸繖锛岃绋嶅€欏啀璇曪紒<span style="display:none;">errno:3</span>',autoClose:!0}),typeof n.error=="function"&&n.error()}};return jQuery.ajax(s),!1},ajaxForm:function(e,t,n){var t=t||{},r="",i=t.url||jQuery("#"+e).prop("action");i=i.indexOf("?")===-1?i+"?":i+"&",i=i.replace(/\&resType\=[^\&]+/g,"")+"resType=json",i=i.replace(/\&isAjax\=1/g,"")+"&isAjax=1";var s={beforeSubmit:function(n,i,s){if(jQuery.ajax._requestCache[e]==1)return!1;var o=!0;return typeof t.beforeSubmit=="function"&&(o=t.beforeSubmit(n,i,s,t)),o&&(jQuery.ajax._requestCache[e]=1,t.noShowLoading||(r=setTimeout(function(){jQuery.DIC.showLoading()},100))),o},success:function(n,i){jQuery.ajax._requestCache[e]=null,clearTimeout(r),jQuery.DIC.showLoading("none"),n==null&&jQuery.DIC.dialog({content:'缃戠粶绻佸繖锛岃绋嶅€欏啀璇曪紒<span style="display:none;">errno:1</span>',autoClose:!0}),typeof n!="object"&&(n=jQuery.parseJSON(n));if(n.errCode==0){t.noMsg||jQuery.DIC.dialog({content:n.message,icon:"success",autoClose:!0}),typeof t.success=="function"&&t.success(n,i,t);if(!t.noJump&&n.jumpURL){var s=n.locationTime||2e3;jQuery.DIC.reload(n.jumpURL,s)}}else if(n.errCode){var o=n.message+'<span style="display:none;">'+n.errCode+"</span>";jQuery.DIC.dialog({content:o,autoClose:!0})}else jQuery.DIC.dialog({content:'缃戠粶绻佸繖锛岃绋嶅€欏啀璇曪紒<span style="display:none;">errno:2</span>',autoClose:!0})},url:i,clearForm:t.clearForm,resetForm:t.resetForm,timeout:t.timeout||15e3,dataType:t.dataType||"json",error:function(t,n,i){jQuery.ajax._requestCache[e]=null,clearTimeout(r),jQuery.DIC.showLoading("none"),jQuery.DIC.dialog({content:'缃戠粶绻佸繖锛岃绋嶅€欏啀璇曪紒<span style="display:none;">errno:3</span>',autoClose:!0})}};return n=n||!1,n?jQuery("#"+e).ajaxSubmit(s):jQuery("#"+e).ajaxForm(s),!1}}})